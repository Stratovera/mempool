api:
  image: ${MEMPOOL_API_IMAGE}
  container_name: mempool-api-${NETWORK}
  restart: unless-stopped
  depends_on:
    - database
    - electrs
  environment:
    MEMPOOL_NETWORK: ${NETWORK}
    CORE_RPC_HOST: ${CORE_RPC_HOST}
    CORE_RPC_PORT: ${CORE_RPC_PORT}
    ELECTRUM_HOST: ${ELECTRS_HOST}
    ELECTRUM_PORT: 50001
    ELECTRUM_TLS_ENABLED: "false"
    DATABASE_HOST: database
  volumes:
    - ./mempool-config.json:/backend/mempool-config.json:rw
    - ${API_DATA_DIR}:/backend/cache
  ports:
    - "${HOST_BIND_PREFIX}${API_PORT}:8999"
  networks:
    - ${MEMPOOL_NETWORK_NAME}
